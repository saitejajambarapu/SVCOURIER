<% layout("/layouts/boilerplate.ejs") -%>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<style>
    body {
        background-color: #f8f9fa;
    }
    .container {
        margin-top: 30px;
        max-width: 600px;
    }
    .card {
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        text-align: center; /* Center all the text inside the card */
    }
    .center-content {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
    }
    .btn-custom {
        background-color: #007bff;
        color: white;
        font-weight: bold;
    }
    .btn-custom:hover {
        background-color: #0056b3;
    }
    .form-group img {
        max-width: 100px;  /* Ensure flag image is responsive */
        height: auto;
    }
    .btn-secondary {
        width: 100%;
    }
</style>
</head>
<body>

<div class="container mt-5 " style="margin-bottom: 460px;">
    <div class="card center-content">
        <h3 class="card-title">Calculate Final Price for <%= country.title %></h3>

        <!-- Display the country's price per kg -->
        <div class="form-group">
            <label>Price per Kg:</label>
            <h4>₹<%= country.price %></h4>
        </div>

        <!-- Display the country flag -->
        <div class="form-group">
            <label>Flag:</label><br>
            <img src="<%= country.image.url %>" alt="Country Flag">
        </div>

        <!-- Input for the user to enter value (e.g., weight) -->
        <div class="form-group">
            <label for="inputValue">Enter Value (e.g., Weight in kg):</label>
            <input type="number" class="form-control" id="inputValue" min="0.1" step="0.1" placeholder="Enter weight in kg">
        </div>

        <!-- Button to calculate the final price -->
        <button class="btn btn-custom" onclick="calculatePrice()">Calculate Final Price</button>

        <!-- Display the calculated final price -->
        <div id="finalPrice" class="mt-4">
            <!-- The result will be displayed here after calculation -->
        </div>

        <!-- Back to Prices Page Button -->
        <div class="mt-4">
            <a href="/Prices" class="btn btn-secondary">Back to Prices</a>
        </div>
    </div>
</div>

<script>
// Function to calculate the final price
function calculatePrice() {
    // Get the user's input value
    const inputValue = parseFloat(document.getElementById('inputValue').value);

    if (isNaN(inputValue) || inputValue <= 0) {
        alert("Please enter a valid number.");
        return;
    }

    // Get the price per kg from the page (from the server-side data)
    const pricePerKg = <%= country.price %>;

    // Calculate the final price
    const finalPrice = (inputValue * pricePerKg).toFixed(2);

    // Display the final price
    document.getElementById('finalPrice').innerHTML = `
        <h4>Your Final Price for ${inputValue} kg is: ₹${finalPrice}</h4>
    `;
}
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
